@page "/budget"
@using System.Net.Http
@inject HttpClient Http

<h3>Budget</h3>

@if (budget != null)
{
    <div class="mat-layout-grid">
        <div class="mat-layout-grid-inner">
            <div class="mat-layout-grid-cell">
                <h4>Inkomster</h4>
                <MatTable Items="@budget.Incomes" ShowPaging="false"  class="mat-elevation-z5">
                    <MatTableHeader>
                        <th>Kategori</th>
                        <th>Summa</th>
                    </MatTableHeader>
                    <MatTableRow>
                        <td>@context.Category.Name</td>
                        <td>@String.Format("{0:C2}", @context.Amount)</td>
                    </MatTableRow>
                </MatTable>
            </div>
            <div class="mat-layout-grid-cell">
                <h4>Utgifter</h4>
                <MatTable Items="@budget.Expenses" ShowPaging="false"  class="mat-elevation-z5">
                    <MatTableHeader>
                        <th>Kategori</th>
                        <th>Summa</th>
                    </MatTableHeader>
                    <MatTableRow>
                        <td>@context.Category.Name</td>
                        <td>@String.Format("{0:C2}", @context.Amount)</td>
                    </MatTableRow>
                </MatTable>
            </div>
        </div>
    </div>
}


@code {
    private ExpenseTracker.Shared.Models.Budget budget;

    protected override async Task OnInitializedAsync() => await GetBudget();

    private async Task GetBudget() =>
        budget = await Http.GetFromJsonAsync<ExpenseTracker.Shared.Models.Budget>("https://localhost:44398/api/Budgets/Base");
}
